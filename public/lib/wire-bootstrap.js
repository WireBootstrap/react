/* Bootstrap for WireBootstrap v2.1.5 (2022-01-13) (c) 2016-2022 Enterprise Blocks, Inc. License details: https://www.wirebootstrap.com/license/component */
if("undefined"==typeof wire)throw"WireBootstrap 'wire' object not found.";wire.bsDatasetPaging=function(){var e=this;function a(){var a=e.$element(),t=e.data(),n=e.config(),l=function(e){return{row:'<div class="row"></div>',colLabel:'<div class="col-md-6">'+(1==e.layout?"<p>Page {0}/{1}: {2} Total Rows</p>":"<p>{0}/{1}: {2}</p>")+"</div>",colButtons:'<div class="col-md-6"></div>',divButtons:'<div class="btn-group pull-right">',first:'<a title="First Page" style="margin-right:3px" href="javascript:void(0)" class="btn btn-default btn-xs"><i class="fa fa-chevron-left"></i><i class="fa fa-chevron-left"></i></a>',prev:'<a title="Previous Page" style="margin-right:3px" href="javascript:void(0)" class="btn btn-default btn-xs"><i class="fa fa-chevron-left"></i></a>',next:'<a title="Next Page" style="margin-right:3px" href="javascript:void(0)" class="btn btn-default btn-xs"><i class="fa fa-chevron-right"></i></a>',last:'<a title="Last Page" href="javascript:void(0)" class="btn btn-default btn-xs"><i class="fa fa-chevron-right"></i><i class="fa fa-chevron-right"></i></a>'}}(n),i=t.__meta.paging;if(a.empty(),i){t.Rows.length||(pages=1,rows=0),i.TotalRows&&(pages=i.Rows==i.TotalRows?1:wire.Format(i.TotalRows/i.Rows+.5,"N").replace(",",""),rows=i.TotalRows);var r=$(l.row);a.append(r),r.append(l.colLabel.format(i.Page,pages,rows));var s=$(l.colButtons);r.append(s);var o=$(l.divButtons);s.append(o),1==n.layout&&o.append($(l.first).click(function(){var e=n.data;e.Query.Paging.Page=1,rows>0&&e.refresh()})),o.append($(l.prev).click(function(){var e=n.data;e.Query.Paging.Page>1&&rows>0&&(e.Query.Paging.Page-=1,e.refresh())})),o.append($(l.next).click(function(){var e=n.data;e.Query.Paging.Page<pages&&rows>0&&(e.Query.Paging.Page+=1,e.refresh())})),1==n.layout&&o.append($(l.last).click(function(){var e=n.data;rows>0&&(e.Query.Paging.Page=pages,e.refresh())})),e.ready()}}return wire.ui.Component.call(this),this.render=function(t,n){var l;l=function(){e.initialize({element:t,cssClass:"wire-dataset-paging",config:{default:{datamap:{id:"id",label:"label",selected:"selected"},layout:1,loading:!1,color:"btn-primary",multiselect:!1,alignment:"horizontal"},user:n},dataBind:a})},$(document).ready(function(){l()})},this},wire.bsCheckboxes=function(){var e=this,a=null;function t(){a=e.config(),datamap=a.datamap;var t=e.data(),n=a.template||'<div class="custom-control custom-{0}"><input type="{1}" class="custom-control-input" id="check_{2}" name="check" value="{3}" {4}><label class="custom-control-label" for="check_{2}">{5}</label></div>',l=e.$element();l.empty(),t.Rows.forEach(function(t){var i=e.configRow(t),r=wire.guidDom(),s=n.format(a.type,"radio"==a.type?"radio":"checkbox",r,t[datamap.id],i.val("checked")==t[datamap.id]||t[datamap.checked]?"checked":"",t[datamap.label]);l.append(s)}),l.find("input").change(function(n){var l=t.where().eq(datamap.id,$(this).val()).first(),i=(new wire.data.DataEvent).source(e).cell(datamap.id,$(this).val()).column(t.getColumn(datamap.id)).row(l).table(t),r=void 0!==l[datamap.checked];this.checked?(r&&(l[datamap.checked]=!0),i.action().add()):(r&&(l[datamap.checked]=!1),i.action().remove());var s={base:n,data:i.getData()};a.events&&a.events.change&&a.events.change(s),i.dataselect().raise()}),e.ready()}return wire.ui.Component.call(this),this.render=function(a,n){var l;return l=function(){e.initialize({element:a,cssClass:"checkbox wire-checkboxes",config:{default:{autoInit:!0,type:"checkbox",datamap:{id:"id",label:"label",checked:"checked"}},user:n},dataBind:t})},$(document).ready(function(){l()}),e},this},wire.bsInput=function(){var e=this,a=null,t=null,n=null,l=!0,i=!1,r=null;function s(){if(n=e.config(),t=e.$element(),a=n.datamap,n.data?e.bindData(o):void 0!==n.value?(t.val(n.value),e.ready()):n.model&&(t.val(e.model.val()),e.ready()),t.on("change",function(r){var s=d($(this).val());if(i=!0,n.validate){var o=t;l=!0,n.validate.cssParent&&(o=t.closest("div")),o.removeClass(n.validate.css||"border-danger"),t.prop("title","")}n.model&&e.model.val(s);var c=e.data();c&&c.first();var u=(new wire.data.DataEvent).dataselect().table(null).row(c).column(null).cell(a.value,s).action().replace();u.raise(),n.events&&n.events.change&&n.events.change({base:r,data:u.getData(),self:e})}),n.events&&n.events.keyEnter&&t.on("keyup",function(e){13===event.keyCode&&(e.preventDefault(),n.events.keyEnter(e))}),n.wireInputCurrency){if(void 0===$.fn.wireInputCurrency)throw"Unable to find wireInputCurrency plugin";r=t.wireInputCurrency(n.wireInputCurrency)}}function o(){var n=e.data(),l=(n?n.first():{})[a.value],i=n.getColumn(a.value);i&&i.Format&&(l=wire.Format(l,i.Format)),t.val(l),e.ready()}function d(e){return n.wireInputCurrency?e.toString().replace("$","").replace(/,/g,""):e}return wire.ui.Component.call(this),this.render=function(a,t){var n;return n=function(){e.initialize({element:a,cssClass:"wire-input",config:{default:{loading:!1,datamap:{value:"value"}},user:t}}),s()},$(document).ready(function(){n()}),e},this.val=function(a){void 0!==a&&(n.model&&e.model.val(d(a)),t.val(a));let l=t;return n.validate.cssParent&&(l=t.closest("div")),l.removeClass(n.validate.css||"border-danger"),t.prop("title",""),d(t.val())},this.clear=function(){var a=null;this.dirty(!1),n.model&&(a=e.model.clear()),t.val(a)},this.dirty=function(e){return void 0!==e&&(i=e),i},this.validate=function(){if(l=!0,n.validate){var a=d(t.val());n.model&&(a=e.model.toNumber(a));var i=wire.ui.validate({field:n.validate,value:a,component:e});if(i){l=!1;var r=t;n.validate.cssParent&&(r=t.closest("div")),r.addClass(n.validate.css||"border-danger"),t.prop("title",i)}}return l},this.wireInputCurrency=function(){return r},this},wire.bsTable=function(){var e=this,a=null,t=null,n=null,l=null;function i(){t=e.config(),a=e.$element();var i=e.data(),r=e.select(),s={},o={paging:"<div></div>"};a.empty();var d=$("<thead>");t.header&&a.append(d);var c=$("<tr>");if(d.append(c),r.forEach(function(e,a){var t=i.getColumn(e),n=$("<th>",{class:"eb-col-"+(a- -1)});c.append(n),t&&(s[t.Name]=t.Format,n.append(t.Title||t.Name))}),d=$('<tbody style="height:{0}">'.format(t.fixedcols&&t.fixedcols.height?t.fixedcols.height:"auto")),a.append(d),t.filter){var u=Array.isArray(t.filter)?t.filter:r;l?(d.append(l),l.find("input").each(function(e){var a=$(this),n=a.data("col");a.val().length>0&&a.focus(),a.keydown(function(e){20==e.keyCode||e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||setTimeout(function(){var e=t.data.Query,l=a.val();p(e,n,l)},500)})})):(l=$("<tr>"),d.append(l),r.forEach(function(e){var a=i.getColumn(e);if(td=$("<td>"),l.append(td),u.indexOf(e)>-1){var n=$('<input data-col="{0}" type="text" placeholder=" Filter {1}">'.format(a.Name,a.Title||a.Name));td.append(n),n.keydown(function(e){var n=$(this);20==e.keyCode||e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||setTimeout(function(){var e=t.data.Query,l=n.val();p(e,a,l)},500)})}}))}function p(e,a,n){if(e.Paging&&e.Paging.Page>0&&e.page(1),"StoredProcedure"==e.__typeName){var l=e.getParam(a.Name||a);l&&(l.Value=n.length>0?n:null)}else{var i=[];e.Filter.forEach(function(e,t){e.Expression.Field&&e.Expression.Field==(a.Name||a)&&"ContainsExpression"==e.Expression.__typeName&&i.push(t)}),i.forEach(function(a){e.Filter.splice(a,1)}),n.length>0&&e.contains(a.Name||a,n)}t.data.refresh()}if(0==i.Rows.length&&d.append("<tr><td>"+(t.noRowsMessage||"No rows returned.")+"</td></tr>"),i.Rows.forEach(function(a,n){(c=$("<tr>")).attr("_r",n),c.css("cursor",t.cursor||"auto"),d.append(c),r.forEach(function(n,l){var r=$("<td>",{class:"eb-col-"+(l- -1)});c.append(r);var o=$("<div>",{class:"eb-cell-value"});r.append(o);var d=a[n],u=i.getColumn(n);if(r.click(function(e){var a=f(e,"dataselect"),n=a.getData();t.events&&t.events.click&&("function"==typeof t.events.click?t.events.click(n):a.raise())}),void 0!==d&&"function"!=typeof d){var p=null==d||void 0===d.Value?null==d?"":d:d.Value||"",v=s[n]?wire.Format(p,s[n]):p;if("object"==typeof d?o.append(v):u.DataType&&"html"==u.DataType?o.html(v):o.text(v),d&&d.Format&&d.Format.Class&&o.addClass(d.Format.Class),r.attr("_c",l),d&&void 0!==d.HasChildren){var m=$('<div style="float:left">');r.prepend(m),o.css("margin-left",15*d.LevelDepth+"px"),d.DrilledDown?m.addClass(wire.ui.config.styles.drillCollapse):d.HasChildren?m.addClass(wire.ui.config.styles.drillExpand):m.addClass(wire.ui.config.styles.drillNone),m.click(function(a){if(t.events&&wire.toBoolean(t.events.datadrilldown,!0)){var n=$(a.currentTarget),l=f(a,"datadrilldown");n.hasClass(wire.ui.config.styles.drillExpand)?l.action().add().raise():l.action().remove().raise(),e.trigger("datadrilldown",l.getData())}})}}function f(a,t){var n=$(a.currentTarget),l=n.closest("td").attr("_c"),i=n.closest("tr").attr("_r"),r=e.data(),s=r.Rows[i],o=r.Columns[l];return new wire.data.DataEvent(t).source(e).cell(o.Id||o.Name,s[o.Name].Id||s[o.Name]).column(o).row(s).table(r)}})}),!n&&t.data.__typeName&&"DataSet"==t.data.__typeName&&t.data.Query.Paging&&t.data.Query.Paging.Page>0){const e=$(o.paging);(n=new wire.bsDatasetPaging).render(e,{data:t.data}),a.parent().append("<hr>"),a.parent().append(e)}e.ready()}return wire.ui.Component.call(this),this.render=function(a,t){var n;return n=function(){e.initialize({element:a,cssClass:"wire-table",config:{default:{filter:!1,header:!0,events:{cellClick:null,datadrilldown:!0}},user:t},dataBind:i})},$(document).ready(function(){n()}),e},this},wire.bsButtons=function(){var e=this;function a(){var a=e.$element(),t=e.data(),n=e.config(),l={group:'<div class="btn-group-{0}" role="group"></div>',button:'<button type="button" class="btn {0}{1} mr-1" _id="{2}">{3}</button>'},i=$(l.group.format(n.alignment)),r=l.button;a.empty().append(i),t.Rows.forEach(function(l){var s=e.configRow(l),o=$(r.format(n.color,s.val("selected")==s.val(n.datamap.id)?" active":"",s.val(n.datamap.id)||"",s.val(n.datamap.label)||""));i.append(o),o.on("click",function(e){var l=$(this),i=l.attr("_id"),r=t.where().eq(n.datamap.id,i).first(),s=t.getColumn(n.datamap.id);const o=l.hasClass("active");a.find("button").removeClass("active"),o||l.addClass("active");var d=(new wire.data.DataEvent).dataselect().table(t).row(r).column(s).cell(s.Name,i).action();o?d.clear():d.replace(),d.raise()})}),e.ready()}wire.ui.Component.call(this),this.render=function(t,n){var l;return l=function(){e.initialize({element:t,cssClass:"wire-buttons",config:{default:{datamap:{id:"id",label:"label",selected:"selected"},color:"btn-primary",multiselect:!1,alignment:"horizontal"},user:n},dataBind:a})},$(document).ready(function(){l()}),e}},wire.bsSelect=function(){var e=this,a=null,t=null,n=null;function l(){a=e.$element(),t=e.config();var l=e.data(),i=t.datamap,r='<option value="{0}"{1}>{2}</option>';let s=!1;if(t.all){if(!l.select().where().eq(i.value,t.all.value).exists()){let e={};e[i.value]=t.all.value,e[i.label]=t.all.label,e[i.selected]=t.all.selected,l.insert(e,!0)}n=t.all.value}else n=null;if(a.empty(),a.addClass("custom-select"),l.Rows.forEach(function(t){var n=e.configRow(t);s||(s=n.val("selected"));var l=r.format(t[i.value],n.val("selected")==t[i.value]||t[i.selected]?"selected":"",t[i.label]);a.append(l)}),a.off("change").change(function(a){var r=$(this).val(),s=l.where().eq(i.value,r).first();t.model&&e.model.val(r);var o=(new wire.data.DataEvent).source(e).cell(i.value,r).column(l.getColumn(i.value)).row(s).table(l);r==n?o.action().clear():o.action().replace();var d={base:a,data:o.getData()};t.events&&t.events.change&&t.events.change(d),o.dataselect().raise()}),t.model){var o=e.model.val();a.val(o)}else!s&&n&&a.val(n);e.ready()}wire.ui.Component.call(this),this.render=function(a,t){var n;return n=function(){e.initialize({element:a,cssClass:"wire-select",config:{default:{all:null,datamap:{value:"value",label:"label",selected:"selected"}},user:t},dataBind:l})},$(document).ready(function(){n()}),e},this.val=function(){if(a)return a.val()}},wire.bs=wire.bs||{},wire.bsSearchList=function(){var e=this,a=null,t=null,n=0,l=null,i=null,r=null;function s(){a=e.config(),l=e.$element(),r=a.datamap;var s={row:'<div class="row"></div>',col:'<div class="col-md-12"></div>',search:'<div class="input-group"><input placeholder="" class="form-control" /><div class="input-group-btn clear-search" style="cursor:pointer"><span class="input-group-text">x</span></div>',div:"<div></div>",hr:'<div class="col-md-12"><hr/></div>'};l.empty();var d=a.searchTemplate||s.search;d=$(d),l.append($(s.row).append($(s.col).append(d))),d.find("input").prop("placeholder","Search "+r.label),l.append($(s.row).append(s.hr)),i=$(s.div),l.append($(s.row).append($(s.col).append(i))),l.append($(s.row).append(s.hr)),a.paging.data=a.data;var c=new wire.bsDatasetPaging,u=$(s.div);c.render(u,a.paging),l.append($(s.row).append($(s.col).append(u))),d.find("input").keydown(function(e){clearTimeout(n);var t=$(this);n=setTimeout(function(){var e=a.data.Query.where().page(1),n=t.val();n.length>0&&e.contains(r.label,n),a.data.refresh()},500)}),l.find(".clear-search").click(function(e){d.find("input").val("");var n=a.data;n.Query.where(),n.Query.Paging.Page>1&&n.Query.page(1),n.refresh();var i=t.data();(new wire.data.DataEvent).dataselect().source(l).cell(a.datamap.id,null).column(i.getColumn(a.datamap.id)).table(i).action().clear().raise()}),e.bindData(o)}function o(){var n=e.data();a.checkbox.datamap=a.datamap,a.checkbox.events=a.checkbox.events||{},a.checkbox.events.change=a.events.change,a.checkbox.data=n,t=(new wire.bsCheckboxes).render(i,a.checkbox),e.ready()}return wire.ui.Component.call(this),this.render=function(a,t){var n;return n=function(){e.initialize({element:a,cssClass:"wire-search-list",config:{default:{datamap:{id:"id",label:"label"},events:{},checkbox:{},paging:{layout:0}},user:t}}),s()},$(document).ready(function(){n()}),e},this.checkbox=function(){return t},this},wire.bsMessageModal=function(e){let a=$.Deferred(),t=a.promise(),n={message:"",title:"Message",css:"alert-primary",callback:null,ok:{label:"Ok",css:"btn-secondary"},cancel:{visible:!1,label:"Cancel",css:"btn-secondary"}};const l=e.id||"wire-message-modal";let i=$("#"+l);wire.merge(n,e);let r="<div class='modal-dialog'><div class='modal-content'><div class='modal-header {0}'><h5 class='modal-title panel-card'>{1}</h5><button type='button' class='close' data-dismiss='modal' aria-hidden='true'>&times;</button></div><div class='modal-body'><p>{2}</p></div><div class='modal-footer'><button type='button' class='btn {3} btn-wire-modal ok'>{4}</button>"+(n.cancel.visible?"<button type='button' class='btn {0} btn-wire-modal cancel'>{1}</button>".format(n.cancel.css,n.cancel.label):"")+"</div></div></div>";return i.length?i.empty():(i=$("<div id='{0}' class='modal wire-modal wire-modal-message'></div>".format(l)),$(document.body).append(i)),r=r.format(n.css,n.title,n.message,n.ok.css,n.ok.label),i.append(r),i.modal("show"),i.css("margin-top",($(window).height()-i.height())/2),i.css("margin-left",($(window).width()-i.width())/2),i.find(".btn-wire-modal").click(e=>{const t=$(e.currentTarget).hasClass("ok");function l(){i.modal("hide"),a.resolve(t)}n.callback?n.callback(t,e=>{e||l()}):l()}),t},wire.bsErrorModal=function(e,a,t){if(!e||!e.status||545!=e.status){"string"==typeof e?a=e:e.responseJSON&&("object"==typeof e.responseJSON?e=e.responseJSON:"string"==typeof e.responseJSON?e=$.parseJSON(e.responseJSON):e.responseText&&(e=$.parseJSON(e.responseText)));var n={};n.msg=e.ExceptionMessage||e.Message||e.message||e.responseText||"",n.msg=a?a+"\n\n"+n.msg:n.msg,n.title=e.Title||e.statusText||"Error",n.number=e.number||e.Number||e.status||e.HResult||"",n.stack=e.StackTrace||e.stack||e.StackTraceString||"",n.instance=e.Instance||"",n.user=e.User||"",e.InnerException&&(n.inner=function e(a){var t=null;return a.Message&&(t=a.Message+"<br><br>",a.InnerException&&(t+=e(a.InnerException))),t}(e.InnerException));var l=$("#wire-error-modal");l.length?l.empty():(l=$("<div id='wire-error-modal' class='modal wire-modal wire-modal-error'></div>"),$(document.body).append(l));var i="<div class='modal-dialog'><div class='modal-content'><div class='modal-header alert-danger'><h5 class='modal-title card-title'>{0}</h5><button type='button' class='close' data-dismiss='modal' aria-hidden='true'>&times;</button></div><div class='modal-body'><p>{1}</p><p><br><a href=\"#\" onclick=\"$('#eb-error-st').toggle();\" style=\"cursor:pointer\">Details</a></p><p id='eb-error-st' class='text-warning' style='display:none'><small>Error Number: {2}<br>Instance: {3}<br>User: {4}<br><br>{5}{6}</small></p></div><div class='modal-footer'><button type='button' class='btn btn-secondary' data-dismiss='modal'>Close</button></div></div></div>";i=i.format(n.title,n.msg,n.number,n.instance,n.user,n.inner||"",n.stack),l.append(i),l.modal(),l.css("margin-top",($(window).height()-l.height())/2),l.css("margin-left",($(window).width()-l.width())/2)}},wire.bsUrlModal=function(e){if(!e.url)throw"Missing url parameter to ModalUrl function";var a=$("#wire-url-modal");a.length?a.empty():(a=$("<div id='wire-url-modal' class='modal wire-modal wire-modal-url' style='overflow:hidden'></div>"),$(document.body).append(a));var t={footer:"<div class='modal-footer'><button type='button' class='btn btn-default' data-dismiss='modal'>Close</button></div>",body:"<div class='modal-dialog'><div class='modal-content panel-{0}' style='width:{1}; height:{2}{3}'><div class='modal-header panel-heading'><button type='button' class='close' data-dismiss='modal' aria-hidden='true'>&times;</button><h4 class='modal-title panel-title'>{4}</h4></div><div class='modal-body'>"+'<iframe width="{5}" height="{6}" frameborder="0" scrolling="{7}" allowtransparency="true" src = "{8}"></iframe></div>{8}</div></div>'};e.frame=e.frame||{},s=t.body.format(e.color||"default",(e.width||"980")+"px",(e.height||"800")+"px",e.css?"; "+e.css:"",e.title||this.Title,e.frame.width||"100%",e.frame.height||"100%",e.frame.scrolling?"yes":"no",e.url,e.footer?t.footer:""),a.append(s),a.modal(),setTimeout(()=>{a.css("margin-left",(e.width||"980")/2*-1*.6)},500)},wire.bsSubMenus=function(){$(".dropdown-menu a.dropdown-toggle").on("click",function(e){return $(this).next().hasClass("show")||$(this).parents(".dropdown-menu").first().find(".show").removeClass("show"),$(this).next(".dropdown-menu").toggleClass("show"),$(this).parents("li.nav-item.dropdown.show").on("hidden.bs.dropdown",function(e){$(".dropdown-submenu .show").removeClass("show")}),!1})};